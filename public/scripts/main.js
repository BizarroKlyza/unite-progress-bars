function createNode(e){return document.createElement(e)}function append(e,t){return e.appendChild(t)}function prepend(e,t){return e.prepend(t)}let btns=document.querySelector(".buttons"),selector=document.querySelector("#progress-select"),url="https://pb-api.herokuapp.com/bars";fetch(url).then(e=>e.json()).then(function(e){let t=e.buttons,n=document.querySelector(".container");e.bars.map((t,a)=>{let r=createNode("div");r.classList.add("progress");let i=createNode("div");i.classList.add("progress-bar"),i.style.width=Math.round(t/e.limit*100)+"%",i.setAttribute("id","progress-"+a),i.setAttribute("data-initial",t),append(n,r),append(r,i);let s=createNode("span");s.classList.add("percentage"),s.innerText=i.style.width,append(r,s);let d=createNode("option");d.text="#progress-"+a,selector.add(d)});let a=selector.options[selector.selectedIndex],r=document.querySelector("#progress-0"),i=e.bars[0];selector.addEventListener("change",function(){a=this.value,r=document.querySelector(this.value),i=r.dataset.initial});let s=e.limit;return t.map(function(t){let n=createNode("input");n.classList.add("btn"),n.setAttribute("type","button"),n.setAttribute("value",t<0?t:"+"+t),n.addEventListener("click",function(){r.dataset.initial=parseInt(r.dataset.initial)+parseInt(n.value);let t=Math.round(parseInt(r.dataset.initial)/parseInt(e.limit)*100);r.dataset.initial>=s?(r.style.width="100%",r.style.backgroundColor="red"):r.dataset.initial<=0?(r.dataset.initial=0,t=0,r.style.width="0%"):(r.style.width=t+"%",r.style.backgroundColor="green"),r.nextSibling.innerText=t+"%"}),append(btns,n)})}).catch(function(e){console.log(e)});